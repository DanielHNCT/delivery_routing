# ğŸš€ PROMPT PARA ANDROID - CORRECCIÃ“N ERROR 422 JSON

## ğŸ¯ PROBLEMA IDENTIFICADO:

**Error 422: Unprocessable Entity** - **Mismatch en la estructura JSON** entre Android y tu backend local.

## ğŸ“Š ANÃLISIS DEL ERROR:

### âŒ LO QUE ANDROID ENVÃA:
```json
{
  "audit": {...},
  "commun": {...},
  "login": "PCP0010699_A187518",        // â† CAMPO INCORRECTO
  "password": "INTI7518",
  "societe": "PCP0010699"
}
```

### âœ… LO QUE TU BACKEND ESPERA:
```json
{
  "username": "PCP0010699_A187518",    // â† CAMPO CORRECTO
  "password": "INTI7518",
  "societe": "PCP0010699"
}
```

## ğŸ”§ SOLUCIÃ“N REQUERIDA:

### 1. CORREGIR ESTRUCTURA ColisLoginRequest:

```kotlin
// âŒ ESTRUCTURA ACTUAL (INCORRECTA):
@Serializable
data class ColisLoginRequest(
    val audit: AuditData,
    val commun: CommunData,
    @SerialName("login")           // â† CAMBIAR AQUÃ
    val login: String,             // â† CAMBIAR AQUÃ
    val password: String,
    val societe: String
)

// âœ… ESTRUCTURA CORREGIDA:
@Serializable
data class ColisLoginRequest(
    val audit: AuditData,
    val commun: CommunData,
    @SerialName("username")        // â† CAMBIAR AQUÃ
    val username: String,          // â† CAMBIAR AQUÃ
    val password: String,
    val societe: String
)
```

### 2. ACTUALIZAR LÃ“GICA DE CONSTRUCCIÃ“N:

```kotlin
// âŒ LÃ“GICA ACTUAL:
val request = ColisLoginRequest(
    audit = auditData,
    commun = communData,
    login = credentials.username,    // â† CAMBIAR AQUÃ
    password = credentials.password,
    societe = credentials.societe
)

// âœ… LÃ“GICA CORREGIDA:
val request = ColisLoginRequest(
    audit = auditData,
    commun = communData,
    username = credentials.username,  // â† CAMBIAR AQUÃ
    password = credentials.password,
    societe = credentials.societe
)
```

### 3. VERIFICAR USO EN REPOSITORIO:

```kotlin
// En ColisRepository o similar, verificar que se use 'username':
ColisLoginRequest(
    audit = auditData,
    commun = communData,
    username = credentials.username,  // â† USAR username
    password = credentials.password,
    societe = credentials.societe
)
```

## ğŸ“± ARCHIVOS A MODIFICAR:

1. **ColisLoginRequest.kt** - Cambiar `login` por `username`
2. **ColisRepository.kt** - Actualizar construcciÃ³n del request
3. **Cualquier otro lugar** donde se construya `ColisLoginRequest`

## ğŸ¯ RESULTADO ESPERADO:

DespuÃ©s de la correcciÃ³n:
- âœ… **Error 422 resuelto**
- âœ… **JSON deserializado correctamente**
- âœ… **AutenticaciÃ³n exitosa** a travÃ©s de tu backend
- âœ… **OptimizaciÃ³n de rutas** funcionando

## ğŸ“‹ RESUMEN:

**Solo necesitas cambiar `login` por `username`** en la estructura `ColisLoginRequest`. Es un cambio de **1 lÃ­nea** que resolverÃ¡ el error 422.

**Tu backend ya estÃ¡ funcionando perfectamente** - solo es un mismatch de nombres de campos JSON.

---

**Â¡La integraciÃ³n ya estÃ¡ funcionando! Solo corrige este pequeÃ±o detalle de JSON.** ğŸ¯
